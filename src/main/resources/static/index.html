<html >
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>edoexpenses</title>
    <link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous" />
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body ng-app="edoexpensesApp" class="ng-cloak">
    <div class="container" ng-controller="edoexpensesController as ctrl">
      <div class="page-header">
        <h1>Edoexpenses</h1>
      </div>
      <!-- LIST PANEL -->
      <div class="panel panel-primary">
        <div class="panel-heading"><span class="lead">List of expenses</span>
          <button type="button" class="btn close pull-right" ng-click="fetchAllExpenses();cancelCreating();cancelEditing();">
          <span class="glyphicon glyphicon-refresh"></span>
          </button>
        </div>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Description</th>
              <th>Value</th>
              <th>Date</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-class="{'info':isSelectedExpense(expense.id)}" ng-repeat="expense in expenses">
              <td>
                <dl>{{expense.description}}</dl>
              </td>
              <td>{{expense.value}}</td>
              <td>{{expense.date | date:'dd/MM/yyyy'}}</td>
              <td class="text-right">
                <button type="button" class="btn btn-success " ng-click="setEditedExpense(expense);startEditing();">
                <span class="glyphicon glyphicon-pencil"></span>
                </button>
                <button class="btn btn-danger" type="button" title="Delete" ng-click="deleteExpense(expense)">
                <span class="glyphicon glyphicon-trash"></span>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- CREATING -->
      <div ng-if="shouldShowCreating()">
        <div ng-if="!isCreating">
          <button type="button" class="btn btn-link pull-right" ng-click="startCreating();">
          <span class="glyphicon glyphicon-plus"></span>
          Add a new expense
          </button>
        </div>
        <div ng-if="isCreating">
          <div class="panel panel-default">
            <div class="panel-heading"><span class="lead">ADDING A NEW EXPENSE </span>
              <button type="button" class="btn close pull-right" ng-click="cancelCreating()">
              <span class="glyphicon glyphicon-remove"></span>
              </button>
            </div>
            <div class="panel-body">
              <form class="form-horizontal" ng-submit="addExpense(newExpense)">
                <div class="form-group">
                  <label class="control-label col-sm-2" for="description">Description:</label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control" id="description" 
                      ng-model="newExpense.description" placeholder="Expense description">
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-sm-2" for="value">Value:</label>
                  <div class="col-sm-8">
                    <input type="number" class="form-control" id="value"
                      ng-model="newExpense.value" placeholder="0.01" step="0.01" lang="en">
                  </div>
                </div>
                <div class="form-group">
                  <label class="control-label col-sm-2" for="date">Date:</label>
                  <div class="col-sm-8">
                    <input type="date" class="form-control" id="date"
                      ng-model="newExpense.date" placeholder="01/01/2017">
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-8">
                    <button type="submit" class="btn btn-default">Submit</button>
                    <button type="button" class="btn btn-default" ng-click="cancelCreating()">Cancel</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
      <!-- EDITING -->
      <div ng-if="shouldShowEditing()">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="lead">Editing {{editedExpense.description}} </span>
            <button type="button" class="btn close pull-right" ng-click="cancelEditing()">
            <span class="glyphicon glyphicon-remove"></span>
            </button>
          </div>
          <div class="panel-body">
            <form class="form-horizontal" ng-submit="updateExpense(editedExpense)">
              <div class="form-group">
                <label class="control-label col-sm-2" for="description">Description:</label>
                <div class="col-sm-8">
                  <input type="text" class="form-control" id="description" 
                    ng-model="editedExpense.description" placeholder="Expense description">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-sm-2" for="value">Value:</label>
                <div class="col-sm-8">
                  <input type="number" class="form-control" id="value"
                    ng-model="editedExpense.value" placeholder="0.01" step="0.01">
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-sm-2" for="date">Date:</label>
                <div class="col-sm-8">
                  <input type="date" class="form-control" id="date"
                    ng-model="editedExpense.date" placeholder="01/01/2017">
                </div>
              </div>
              <div class="form-group">
                <div class="col-sm-offset-2 col-sm-8">
                  <button type="submit" class="btn btn-default">Submit</button>
                  <button type="button" class="btn btn-default" ng-click="cancelEditing()">Cancel</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular-resource.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
  <script type="text/javascript" src="js/app.js"></script>
  <script type="text/javascript" src="js/service/expenses_service.js"></script>
  <script type="text/javascript" src="js/controller/expenses_controller.js"></script>
</html>